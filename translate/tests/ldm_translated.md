---
status: translated
title: "LDM - Logical Disk Manager (Dynamic Disks)"
author: Linux Kernel Community
collector: tttturtle-russ
collected_date: 20240718
translator: FILL_YOUR_GITHUB_ID_HERE
translating_date: 20250916
link: https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/admin-guide/ldm.rst
---

# LDM - 逻辑磁盘管理器（动态磁盘）

作者

:   最初由 FlatCap - Richard Russon 编写  
    \\<<ldm@flatcap.org>\\>。

最后更新

:   Anton Altaparmakov 于 2007 年 3 月 30 日针对 Windows Vista 进行更新。

## 概述

Windows 2000、XP 和 Vista 使用了一种新的分区方案。这是对 MSDOS 风格分区的完全替代。它在物理磁盘的末尾存储一个 1MiB 的日志数据库。分区的大小仅受磁盘空间的限制。最大分区数量接近 2000 个。

在 LDM 下创建的任何分区都被称为“动态磁盘”。不再有主分区和扩展分区之分。传统的 MSDOS 风格分区现在被称为基本磁盘。

如果你想使用跨区卷（Spanned）、带区卷（Striped）、镜像卷（Mirrored）或 RAID 5 卷，就必须使用动态磁盘。日志功能允许 Windows 在无需重启的情况下对这些分区和文件系统进行更改。

一旦 LDM 驱动程序对磁盘进行了划分，就可以使用 MD 驱动程序来组装任何多分区卷，例如带区卷、RAID5。

为了防止旧版应用程序重新分区磁盘，LDM 创建了一个包含一个磁盘大小分区的虚拟 MSDOS 分区。Linux 的 LDM 驱动程序支持的就是这种机制。

Vista 实现了一种新的方法，即将 LDM 放在 GPT 标签磁盘之上。目前 Linux 的 LDM 驱动程序尚不支持这种方式。

## 示例

以下是一个 50MiB 的磁盘，被划分为七个分区。

:::: note
::: title
注意
:::

磁盘末尾缺失的 1MiB 是 LDM 数据库的存储位置。
::::

+\\-\\-\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\--+
\\| 偏移量（字节） \\| 扇区数 \\| MiB \\|\\| 大小（字节） \\| 扇区数 \\| MiB\\|
+=======++==============+=========+=====++==============+=========+====+
\\| 0 \\| 0 \\| 0 \\|\\| 52428800 \\| 102400 \\| 50\\|
+\\-\\-\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\--+
\\| 51380224 \\| 100352 \\| 49 \\|\\| 1048576 \\| 2048 \\| 1\\|
+\\-\\-\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\--+
\\| 16384 \\| 32 \\| 0 \\|\\| 6979584 \\| 13632 \\| 6\\|
+\\-\\-\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\--+
\\| 6995968 \\| 13664 \\| 6 \\|\\| 10485760 \\| 20480 \\| 10\\|
+\\-\\-\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\--+
\\| 17481728 \\| 34144 \\| 16 \\|\\| 4194304 \\| 8192 \\| 4\\|
+\\-\\-\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\--+
\\| 21676032 \\| 42336 \\| 20 \\|\\| 5242880 \\| 10240 \\| 5\\|
+\\-\\-\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\--+
\\| 26918912 \\| 52576 \\| 25 \\|\\| 10485760 \\| 20480 \\| 10\\|
+\\-\\-\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\--+
\\| 37404672 \\| 73056 \\| 35 \\|\\| 13959168 \\| 27264 \\| 13\\|
+\\-\\-\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\--++\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\-\\-\\-\\-\\-\\--+\\-\\-\\--+

LDM 数据库可能不会按照分区在磁盘上的顺序存储它们，但驱动程序会对其进行排序。

当 Linux 启动时，你会看到类似以下内容：

    hda: 102400 扇区，32KiB 缓存，CHS=50/64/32
    hda: [LDM] hda1 hda2 hda3 hda4 hda5 hda6 hda7

## 编译 LDM 支持

要启用 LDM，请选择以下两个选项：

> -   “高级分区选择” CONFIG_PARTITION_ADVANCED
> -   “Windows 逻辑磁盘管理器（动态磁盘）支持”  
>     CONFIG_LDM_PARTITION

如果你认为驱动程序没有按预期工作，可以启用额外的调试代码。这将产生大量输出。选项如下：

> -   “Windows LDM 额外日志” CONFIG_LDM_DEBUG

注意：分区代码不能编译为模块。

与所有分区代码一样，如果驱动程序未检测到其支持的分区类型，它会将控制权交给其他驱动程序，因此启用它不会造成任何损害。

如果你使用的是动态磁盘但未启用该驱动程序，则你只能看到一个填满整个磁盘的虚拟 MSDOS 分区。你将无法挂载磁盘上的任何卷。

## 启动

如果你启用了 LDM 支持，那么 LILO 能够从任何发现的分区启动。然而，GRUB 无法理解 LDM 分区，因此无法从动态磁盘启动。

## 更多文档

有关 LDM 的概述以及完整的技术文档可供下载。

> <http://www.linux-ntfs.org/>

如果你有关于 LDM 的问题，而文档中没有解答，请发送电子邮件给我。

致意，

:   FlatCap - Richard Russon <ldm@flatcap.org>